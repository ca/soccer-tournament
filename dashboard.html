<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Madison Holleran Memorial Soccer Tournament</title>
    <link href="assets/css/bootstrap.min.css" rel="stylesheet">
    <link href='http://fonts.googleapis.com/css?family=Roboto:400,100,300,700,400italic,700italic' rel='stylesheet'>
    <link href="assets/css/animate.css" rel="stylesheet">
    <link href="assets/css/prettyPhoto.css" rel="stylesheet">
    <link href="assets/css/bracket.css" rel="stylesheet">
    <link href="assets/css/style.css" rel="stylesheet">
    <!--[if lt IE 9]><script src="assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../docs-assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="../docs-assets/ico/favicon.png">
    <style type="text/css">
      .vcenter {
        display: inline-block;
        vertical-align: middle;
        float: none;
      }
      #map { height: 416px; width: 555px; }
      #rules-list h2 { display: inline; }
      #rules-list li {
        margin-top:30px;
        margin-bottom:30px;
      }
    </style>
  </head>
  <body>

  <section id="features" class="section">
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <div class="overview animate" data-animate="flipInX">
            <h1><strong>Admin</strong> Dashboard</h1>
            <p class="lead">Please sign in below to use this dashboard</p>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-lg-8 col-lg-offset-2">
          <form id="loginform">
            <div class="form-group">
              <label for="username">Username</label>
              <input type="text" class="form-control" id="username" placeholder="Enter username">
            </div>
            <div class="form-group">
              <label for="password">Password</label>
              <input type="password" class="form-control" id="password" placeholder="Password">
            </div>
            <button type="submit" class="btn btn-primary">Submit</button>
          </form>
        </div>
      </div>
    </div>
  </section>
  
  <section id="image" class="section" style="background-color:#FFF; border-top: 1px solid rgba(0, 0, 0, .1);display:none">
    <div class="container">
      <div class="row">
        <div class="col-md-12 sol-sm-12">
          <div class="overview animate" data-animate="flipInX">
            <h1>Registered Teams</h1>
            <p class="lead" id="clock"></p>
          </div>
        </div>
        <!-- <div class="col-md-6 col-sm-12">
          <div id="map"></div>
        </div>
        <div class="col-md-6 col-sm-12">
          <div class="content-block animate" data-animate="fadeInRight" style="margin-top: 60px;">
            <h2>Northern Highlands Turf Field</h2>
            <p class="lead">Saturday, June 27</p>
            <hr />
            <p><a href="#">Link Text</a> Collaboratively <em>rendered as italicized text</em> envisioneer magnetic schemas through <small>This line of text is meant to be treated as fine print.</small> synergistic technologies. Holisticly seize professional ideas before wireless metrics. Appropriately drive <strong>rendered as bold text</strong> progressive <abbr title="attribute">attr</abbr> catalysts <abbr title="HyperText Markup Language" class="initialism">HTML</abbr>.</p>
            <button class="btn btn-md btn-primary">Learn More</button>
            <button class="btn btn-md btn-default">Purchase Now</button>
          </div>
        </div> -->
      </div>
      <div class="row" id="teams"></div>
    </div>
  </section>

  <section id="gallery" class="section" style="display:none">
    <div class="container">
      <div class="row">
        <div class="col-md-12 sol-sm-12">
          <div class="overview animate" data-animate="flipInY">
            <h1><strong>Projected</strong> Donations</h1>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-8 col-md-offset-2 vcenter">
          <canvas id="projectedDonations" height="200" style="width:100%"></canvas>
        </div><!--
        --><div class="col-md-2 vcenter">
          <h2>Total Earnings</h2>
          <h1>$500</h1>
        </div>
      </div><br><br>
      <div class="row">
        <div class="col-md-3 col-sm-4 col-xs-6">
          <a href="http://placehold.it/400x300" title="This is the description">
            <img src="http://placehold.it/400x300" alt="Turtle" class="img-rounded image-responsive animate" data-animate="fadeIn">
          </a>
        </div>
        <div class="col-md-3 col-sm-4 col-xs-6">
          <a href="http://placehold.it/400x300" title="This is the description">
            <img src="http://placehold.it/400x300" alt="Turtle" class="img-rounded image-responsive animate" data-animate="fadeIn">
          </a>
        </div>
        <div class="col-md-3 col-sm-4 col-xs-6">
          <a href="http://placehold.it/400x300" title="This is the description">
            <img src="http://placehold.it/400x300" alt="Turtle" class="img-rounded image-responsive animate" data-animate="fadeIn">
          </a>
        </div>
        <div class="col-md-3 col-sm-4 col-xs-6">
          <a href="http://placehold.it/400x300" title="This is the description">
            <img src="http://placehold.it/400x300" alt="Turtle" class="img-rounded image-responsive animate" data-animate="fadeIn">
          </a>
        </div>
      </div>
    </div>
  </section>
<!--
  <section>
    <div class="container">
      <div class="col-lg-6 text-center">
        <h1>Tournament Bracket</h1>
        <main id="tournament" class="text-left">
          <ul class="round round-1">
            <li class="spacer">&nbsp;</li>
            
            <li class="game game-top winner">Lousville <span>79</span></li>
            <li class="game game-spacer">&nbsp;</li>
            <li class="game game-bottom ">NC A&T <span>48</span></li>

            <li class="spacer">&nbsp;</li>
            
            <li class="game game-top winner">Colo St <span>84</span></li>
            <li class="game game-spacer">&nbsp;</li>
            <li class="game game-bottom ">Missouri <span>72</span></li>

            <li class="spacer">&nbsp;</li>
            
            <li class="game game-top ">Oklahoma St <span>55</span></li>
            <li class="game game-spacer">&nbsp;</li>
            <li class="game game-bottom winner">Oregon <span>68</span></li>

            <li class="spacer">&nbsp;</li>
          </ul>
        </main>
      </div>
      <div class="col-lg-6 text-center">
        <h1>Consolation Bracket</h1>
        <main id="tournament" class="text-left">
          <ul class="round round-1">
            <li class="spacer">&nbsp;</li>
            
            <li class="game game-top winner">Lousville <span>79</span></li>
            <li class="game game-spacer">&nbsp;</li>
            <li class="game game-bottom ">NC A&T <span>48</span></li>

            <li class="spacer">&nbsp;</li>
            
            <li class="game game-top winner">Colo St <span>84</span></li>
            <li class="game game-spacer">&nbsp;</li>
            <li class="game game-bottom ">Missouri <span>72</span></li>

            <li class="spacer">&nbsp;</li>
            
            <li class="game game-top ">Oklahoma St <span>55</span></li>
            <li class="game game-spacer">&nbsp;</li>
            <li class="game game-bottom winner">Oregon <span>68</span></li>

            <li class="spacer">&nbsp;</li>
            
            <li class="game game-top winner">Saint Louis <span>64</span></li>
            <li class="game game-spacer">&nbsp;</li>
            <li class="game game-bottom ">New Mexico St <span>44</span></li>

            <li class="spacer">&nbsp;</li>
          </ul>
          <ul class="round round-2">
            <li class="spacer">&nbsp;</li>
            
            <li class="game game-top winner">Lousville <span>82</span></li>
            <li class="game game-spacer">&nbsp;</li>
            <li class="game game-bottom ">Colo St <span>56</span></li>

            <li class="spacer">&nbsp;</li>
            
            <li class="game game-top winner">Oregon <span>74</span></li>
            <li class="game game-spacer">&nbsp;</li>
            <li class="game game-bottom ">Saint Louis <span>57</span></li>

            <li class="spacer">&nbsp;</li>
          </ul>
          <ul class="round round-3">
            <li class="spacer">&nbsp;</li>
            
            <li class="game game-top winner">Lousville <span>77</span></li>
            <li class="game game-spacer">&nbsp;</li>
            <li class="game game-bottom ">Oregon <span>69</span></li>

            <li class="spacer">&nbsp;</li>
          </ul>
          <ul class="round round-4">
            <li class="spacer">&nbsp;</li>
            
            <li class="game game-top winner">Lousville <span>85</span></li>
            
            <li class="spacer">&nbsp;</li>
          </ul>   
        </main>
      </div>
    </div>
  </section>
 -->
  <script src="assets/js/jquery-1.10.2.min.js"></script>
  <script src="assets/js/bootstrap.js"></script>
  <script src="assets/js/waypoints.min.js"></script>
  <script src="assets/js/jquery.scrollto.min.js"></script>
  <script src="assets/js/jquery.localscroll.min.js"></script>
  <script src="assets/js/jquery.prettyPhoto.js"></script>
  <script src="assets/js/chart.min.js"></script>
  <script src="assets/js/moment.min.js"></script>
  <script src="assets/js/scripts.js"></script>
  <script src="http://www.parsecdn.com/js/parse-1.4.2.min.js"></script>
  <script src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
  <!-- // <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA5KShdU1nAO4apZMePEIeEjOQ6u5sCPhg&sensor=false"></script> -->

  <script type="text/javascript">
  Parse.initialize("nuT9HUvp3foyQprppmA9h5vAKNK6yc7lZO4SKpGI", "TgqoS8MFSJ4YGYBtofwvDpRHBWZxxaAaMHF992DG");

  Date.prototype.addDays = function(days) {
    var dat = new Date(this.valueOf())
    dat.setDate(dat.getDate() + days);
    return dat;
  }

  $('#loginform').submit(function(e) {
    e.preventDefault();
    Parse.User.logIn($('#username').val(), $('#password').val(), {
      success: function(user) { query(); },
      error: function(user, error) { alert('error'); }
    });
  });

  function query () {
    var Team = Parse.Object.extend("Team");
    var team = new Parse.Query(Team);
    team.find({
      success: function(results) { render(results) },
      error: function(error) { alert("Error: " + error.code + " " + error.message); }
    });
  }

  function getDates (startDate, stopDate) {
    // if (stopDate > new Date()) { stopDate = new Date(); }
    var dateArray = new Array();
    var currentDate = startDate;
    while (currentDate <= stopDate) {
      dateArray.push(moment(currentDate).format("dddd, MMMM Do"));
      currentDate = currentDate.addDays(1);
    }
    return dateArray;
  }

  function update () {
    var a = moment([2015, 06, 27]);
    $('#clock').html(a.fromNow());
  }

  function render (results) {
    $('#features').hide();
    $('#image').show();
    $('#gallery').show();

    for (var i=0; i<results.length; i++) {
      var object = results[i];
      var teammates = '<div class="row" id="teammates">';
      for (var j=0; j<object.get('players').length; j++) {
        teammates += '<div class="col-md-6">';
        teammates += object.get('players')[j];
        teammates += '</div>';
      }
      teammates += '</div>';

      var captain = '<strong>'+object.get('captain').name+'</strong><br>'+
          object.get('captain').email+'<br>'+
          object.get('captain').phone+'<br>';

      var badge = '';
      if (object.get('verified')) badge = '<h1><span class="label label-primary">Verified</span></h1>';

      var top = '<div class="row">'+
          '<div class="col-md-6">'+captain+'</div>'+
          '<div class="col-md-6 text-center">'+badge+'</div></div>';

      $('#teams').append(
        '<div class="col-md-4">'+
          '<h2>'+object.get('name')+'</h2>'+
          top+
          '<a href='+object.get('waiver').url()+' target="_blank">Waiver</a>'+
          teammates+
        '</div>'
      );
    }

    var data = []; // for each day, push 25*(# of teams registered)
    renderChart(data);
  }

  function renderChart (data) {
    var startDate = new Date(2015,06,05); // first date of user reg
    var endDate = new Date(2015,06,12); // today or Date(2015,06,27);
    var dateArray = getDates(startDate, endDate);

    var ctx = $("#projectedDonations").get(0).getContext("2d");
    var data = {
      labels: dateArray,
      datasets: [
        {
          label: "My First dataset",
          fillColor: "rgba(220,220,220,0.2)",
          strokeColor: "rgba(220,220,220,1)",
          pointColor: "rgba(220,220,220,1)",
          pointStrokeColor: "#fff",
          pointHighlightFill: "#fff",
          pointHighlightStroke: "rgba(220,220,220,1)",
          data: [65, 59, 80, 81, 56, 55, 40]
        },
        {
          label: "My Second dataset",
          fillColor: "rgba(151,187,205,0.2)",
          strokeColor: "rgba(151,187,205,1)",
          pointColor: "rgba(151,187,205,1)",
          pointStrokeColor: "#fff",
          pointHighlightFill: "#fff",
          pointHighlightStroke: "rgba(151,187,205,1)",
          data: [28, 48, 40, 19, 86, 27, 90]
        }
      ]
    };
    var options = {
      ///Boolean - Whether grid lines are shown across the chart
      scaleShowGridLines : true,
      //String - Colour of the grid lines
      scaleGridLineColor : "rgba(0,0,0,.05)",
      //Number - Width of the grid lines
      scaleGridLineWidth : 1,
      //Boolean - Whether to show horizontal lines (except X axis)
      scaleShowHorizontalLines: true,
      //Boolean - Whether to show vertical lines (except Y axis)
      scaleShowVerticalLines: true,
      //Boolean - Whether the line is curved between points
      bezierCurve : true,
      //Number - Tension of the bezier curve between points
      bezierCurveTension : 0.4,
      //Boolean - Whether to show a dot for each point
      pointDot : true,
      //Number - Radius of each point dot in pixels
      pointDotRadius : 4,
      //Number - Pixel width of point dot stroke
      pointDotStrokeWidth : 1,
      //Number - amount extra to add to the radius to cater for hit detection outside the drawn point
      pointHitDetectionRadius : 20,
      //Boolean - Whether to show a stroke for datasets
      datasetStroke : true,
      //Number - Pixel width of dataset stroke
      datasetStrokeWidth : 2,
      //Boolean - Whether to fill the dataset with a colour
      datasetFill : true,
      //String - A legend template
      legendTemplate : "<ul class=\"<%=name.toLowerCase()%>-legend\"><% for (var i=0; i<datasets.length; i++){%><li><span style=\"background-color:<%=datasets[i].strokeColor%>\"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>"
    };
    var donations = new Chart(ctx).Line(data, options);
  }

  setInterval(update, 1000);
  </script>
  </body>
</html>